#! /bin/sh

if [ "$(xrandr --listmonitors | head -1 | cut -d ' ' -f 2)" = "2" ]
then
    bspc monitor eDP-1-1 -d 1 2 3 4 5
    bspc monitor HDMI-0  -d 6 7 8 9 0
else
    bspc monitor -d 1 2 3 4 5 6 7 8 9 0
fi

export SSH_AUTH_SOCK=$(gpgconf --list-dirs agent-ssh-socket)
gpgconf --launch gpg-agent

export XMODIFIERS="@im=fcitx"
export QT_IM_MODULE=fcitx
export GTK_IM_MODULE=fcitx

feh --no-fehbg --bg-fill ${HOME}/Pictures/wallpaper.jpg &
sxhkd                 > ${LOCALPATH}/log/sxhkd.log     2>&1 &
fcitx                 > ${LOCALPATH}/log/fcitx.log     2>&1 &
redshift              > ${LOCALPATH}/log/redshift.log  2>&1 &
syncthing -no-browser > ${LOCALPATH}/log/syncthing.log 2>&1 &
battery-notify -b
urxvtd --quiet --opendisplay --fork
for m in $(polybar --list-monitors | cut -d ':' -f1)
do
    MONITOR=$m polybar --reload bar > ${LOCALPATH}/log/polybar.$m.log 2>&1 &
done

bspc config window_gap  25
bspc config border_width 5

bspc config normal_border_color  "#282C34"
bspc config focused_border_color "#61AFEF"

bspc config split_ratio               0.55
bspc config borderless_monocle        true
bspc config gapless_monocle           true
bspc config focus_follows_pointer     true
bspc config remove_disabled_monitors  true
bspc config remove_unplugged_monitors true
bspc config initial_polarity          first_child
bspc config external_rules_command    $HOME/.config/bspwm/external_rules

bspc rule --add 'Zathura:*'     state=tiled
bspc rule --add 'Pavucontrol:*' state=floating
